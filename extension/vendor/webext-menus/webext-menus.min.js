var webextMenus=function(){"use strict";const n=browser.menus||browser.contextMenus,e=new Set(["all","bookmark","browser_action","launcher","page_action","tab","tools_menu"]),t=Object.values(n.ContextType).filter(n=>!e.has(n));return function(e){function o(n){return n.contexts?n.contexts:null!=n.parentId?o(u.get(n.parentId)):["page"]}function c(e){e.id=n.create(e.options),e.isCreated=!0}function s(e){n.remove(e.id),e.isCreated=!1}function i(n){if(n.nextSibling)for(const e of Object.values(n.nextSibling))e.isCreated&&s(e),i(e)}function r(n){if(n.nextSibling)for(const e of Object.values(n.nextSibling))!e.isCreated&&e.show&&c(e),r(e)}const u=new Map,a=[],f=[];return function(n){const e={};for(const s of n){null!=s.id&&u.set(s.id,s),s.options=Object.assign({},s),"function"==typeof s.checked&&(delete s.options.checked,f.push(s)),s.oncontext?(delete s.options.oncontext,a.push(s),s.show=!1):(c(s),s.show=!0);for(const n of function(n){return n.reduce((n,e)=>("all"===e?t.forEach(e=>n.add(e)):n.add(e),n),new Set)}(o(s))){e[n]||(e[n]=new Map);const t=e[n].get(s.parentId);t&&(t.nextSibling||(t.nextSibling={}),t.nextSibling[n]=s),e[n].set(s.parentId,s)}}}(e),{update:function(){!function(){const n=[];for(const e of a){const t=Boolean(e.oncontext());e.show!==t&&(t?(n.push(e),e.show=!0):(s(e),e.show=!1))}for(const e of n)e.isCreated||(i(e),c(e),r(e))}(),function(){for(const e of f)n.update(e.id,{checked:e.checked()})}()}}}}();
//# sourceMappingURL=webext-menus.min.js.map
