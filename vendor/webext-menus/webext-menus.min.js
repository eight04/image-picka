var webextMenus=function(){"use strict";const n=browser.menus||browser.contextMenus,t=new Set(["all","bookmark","browser_action","launcher","page_action","tab","tools_menu"]),e=Object.values(n.ContextType).filter(n=>!t.has(n));return function(t){function o(n){return n.contexts?n.contexts:null!=n.parentId?o(a.get(n.parentId)):["page"]}function s(t){t.id=n.create(t.options),t.isCreated=!0}function i(t){n.remove(t.id),t.isCreated=!1}function c(n){if(n.nextSibling)for(const t of Object.values(n.nextSibling))t.isCreated&&i(t),c(t)}function r(n){if(n.nextSibling)for(const t of Object.values(n.nextSibling))!t.isCreated&&t.show&&s(t),r(t)}const a=new Map,u=[];return function(n){const t={};for(const i of n){null!=i.id&&a.set(i.id,i),i.options=Object.assign({},i),delete i.options.oncontext,i.oncontext?(u.push(i),i.show=!1):(s(i),i.show=!0);for(const n of function(n){return n.reduce((n,t)=>("all"===t?e.forEach(t=>n.add(t)):n.add(t),n),new Set)}(o(i))){t[n]||(t[n]=new Map);const e=t[n].get(i.parentId);e&&(e.nextSibling||(e.nextSibling={}),e.nextSibling[n]=i),t[n].set(i.parentId,i)}}}(t),{update:function(){const n=[];for(const t of u){const e=Boolean(t.oncontext());t.show!==e&&(e?(n.push(t),t.show=!0):(i(t),t.show=!1))}for(const t of n)t.isCreated||(c(t),s(t),r(t))}}}}();
//# sourceMappingURL=webext-menus.min.js.map
