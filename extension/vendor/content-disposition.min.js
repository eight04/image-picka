var contentDisposition=function(){"use strict";class e{constructor(e){this.s=e}toString(){const e=new Uint8Array(this.s.length);for(let r=0;r<this.s.length;r++)e[r]=this.s.charCodeAt(r);return new TextDecoder("utf-8").decode(e)}}function r(e){const r=e.split(/[\\\/]/);return r[r.length-1]}const t=function(e,t){var n=t||{},a=n.type||"attachment",f=function(e,t){if(void 0===e)return;var n={};if("string"!=typeof e)throw new TypeError("filename must be a string");void 0===t&&(t=!0);if("string"!=typeof t&&"boolean"!=typeof t)throw new TypeError("fallback must be a string or boolean");if("string"==typeof t&&i.test(t))throw new TypeError("fallback must be ISO-8859-1 string");var a=r(e),f=p.test(a),s="string"!=typeof t?t&&h(a):r(t),u="string"==typeof s&&s!==a;(u||!f||o.test(a))&&(n["filename*"]=a);(f||u)&&(n.filename=u?s:a);return n}(e,n.fallback);return function(e){var r=e.parameters,t=e.type;if(!t||"string"!=typeof t||!c.test(t))throw new TypeError("invalid type");var n=String(t).toLowerCase();if(r&&"object"==typeof r)for(var o,a=Object.keys(r).sort(),i=0;i<a.length;i++){var f="*"===(o=a[i]).substr(-1)?v(r[o]):y(r[o]);n+="; "+o+"="+f}return n}(new m(a,f))};t.parse=function(e){if(!e||"string"!=typeof e)throw new TypeError("argument string is required");var r=x.exec(e);if(!r)throw new TypeError("invalid type format");var t,n,o=r[0].length,a=r[1].toLowerCase(),i=[],s={};o=u.lastIndex=";"===r[0].substr(-1)?o-1:o;for(;r=u.exec(e);){if(r.index!==o)throw new TypeError("invalid parameter format");if(o+=r[0].length,t=r[1].toLowerCase(),n=r[2],-1!==i.indexOf(t))throw new TypeError("invalid duplicate parameter");i.push(t),t.indexOf("*")+1!==t.length?"string"!=typeof s[t]&&('"'===n[0]&&(n=n.substr(1,n.length-2).replace(f,"$1")),s[t]=n):(t=t.slice(0,-1),n=g(n),s[t]=n)}if(-1!==o&&o!==e.length)throw new TypeError("invalid parameter format");return new m(a,s)};var n=/[\x00-\x20"'()*,\/:;<=>?@[\\\]{}\x7f]/g,o=/%[0-9A-Fa-f]{2}/,a=/%([0-9A-Fa-f]{2})/g,i=/[^\x20-\x7e\xa0-\xff]/g,f=/\\([\u0000-\u007f])/g,s=/([\\"])/g,u=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g,p=/^[\x20-\x7e\x80-\xff]+$/,c=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/,l=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,x=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;function g(r){var t=l.exec(r);if(!t)throw new TypeError("invalid extended field value");var n,o=t[1].toLowerCase(),i=t[2].replace(a,w);switch(o){case"iso-8859-1":n=h(i);break;case"utf-8":n=new e(i,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field")}return n}function h(e){return String(e).replace(i,"?")}function w(e,r){return String.fromCharCode(parseInt(r,16))}function d(e){var r=String(e).charCodeAt(0).toString(16).toUpperCase();return 1===r.length?"%0"+r:"%"+r}function y(e){return'"'+String(e).replace(s,"\\$1")+'"'}function v(e){var r=String(e);return"UTF-8''"+encodeURIComponent(r).replace(n,d)}function m(e,r){this.type=e,this.parameters=r}return t}();
//# sourceMappingURL=content-disposition.min.js.map
